---
description: qiita_reader_android の設計方針・構成（README に準拠）
globs: qiita_reader_android/**/*
alwaysApply: false
---

# 機能実装の TODO ワークフロー

機能を実装するときは、次の手順に従う。

## 1. 実装前に TODO を出力する

実装に入る**前**に、その機能を分解した **TODO リスト**を出力する。TODO の出力は**罫線のある表形式**とし、列は「No.」「内容」「所要時間」とする。各項目には番号（1, 2, 3, ...）を付け、**所要時間**は初回表示を **`--`** とする。完了後の所要時間は**分秒**で表記する（例: `2分30秒`、`0分45秒`）。「実施済み」「完了」などの文言は使わず、必ず経過時間を「○分○秒」で表示すること。

- **表形式の例**（Markdown・罫線あり）:
  ```
  | No. | 内容 | 所要時間 |
  | --- | --- | --- |
  | 1 | **見出し** 説明文 | -- |
  | 2 | **見出し** 説明文 | -- |
  | 3 | ... | -- |
  ```
- **TODO 表のタイトル**: 表の上に、**機能の概略を簡潔に記述**したタイトルを付ける（例: 「Data/Domain/Presentation の DI を Koin で注入する」）。
- TODO を**完了するごと**に、その TODO の所要時間を記入したうえで表を**更新して再出力**する。

## 2. レビュー完了後に 1 つずつ TODO を実行する

人間のレビューが完了したあと、**TODO を 1 つずつ**実行する。次の TODO に進むのは、現在の TODO が「完了」と判定されたあととする。

- **人間がレビューを完了したとみなす条件**: 人間が **「todo review done」** と入力すること。
- **TODO を実行するときの条件**（qiita_reader_android を編集する場合）: **`qiita_reader_android/README.md` を読み、その設計に従うこと。** 設計の正本は README のみとする。
- このルールを参照して回答した場合は、回答の**最初**に次の順で必ず出力すること。
  1. **現在のブランチ名**（`git branch --show-current` で取得。取得できない場合は「ブランチ: （未取得）」等とすること）
  2. 参照ルール: `.cursor/rules/qiita-reader-android.mdc`
  3. 参照ドキュメント: `qiita_reader_android/README.md`

## 3. 1 つの TODO の所要時間を計測する

各 TODO について、次の時間を計測する。

- **計測対象**: その TODO の実装を始めてから、ユーザーが **「review done」** と入力するまでの時間。
- **開始時刻の記録**（時刻を持てるようにするため）:
  1. **TODO の実装を開始する直後**に、現在時刻の Unix 秒を取得するコマンド（例: `date +%s`）を実行する。
  2. 得た値（1行の数値）を、プロジェクト内の一時ファイル **`.cursor/qiita_reader_android_todo_start.txt`** に書き込む。これにより「実装開始時刻」が次のターンまで保持される。
- **「review done」受け取り時**:
  1. 再度 `date +%s`（または同等）で現在時刻の Unix 秒を取得する。
  2. 上記ファイルから開始時刻を読み、現在時刻との差（秒）を計算する。
  3. 秒を「○分○秒」に変換し（例: 150秒 → 2分30秒）、その TODO の「所要時間」列に記入して表を更新・再出力する。
- 秒のみの場合は「0分○秒」とする（例: 45秒 → 0分45秒）。

## 4. 1 つの TODO の完了条件

ある TODO が完了したとみなす条件は、**人間が「review done」と入力すること**とする。

「review done」を受け取るまで、その TODO は未完了として扱い、次の TODO には進まない。「review done」を受け取ったら、実装開始時点から「review done」入力時点までの経過時間を**分秒**で算出し、その TODO の「所要時間」列に「○分○秒」で記入したうえで、**更新した TODO 表を再出力**する。
